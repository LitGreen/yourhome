{% extends 'main.html' %}
{% load static %}


{% block content %}

<div class="container home-container">

    <h2>Find your Dream Home</h2>
    <div class="property-filter p-3">
        <form method="get">
            <select name="advert_type">
                {% for value, display in advert_type_choices %}
                <option value="{{ value }}" {% if value == request.GET.advert_type %}selected{% endif %}>{{ display }}</option>
                {% endfor %}
            </select>
            <select name="property_type">
                <option value="" {% if not request.GET.property_type %}selected{% endif %}>Any</option>
                {% for value, display in property_type_choices %}
                <option value="{{ value }}" {% if value == request.GET.property_type %}selected{% endif %}>{{ display }}</option>
                {% endfor %}
            </select>
            <label for="price_min">Min Price:</label>
            <input type="number" name="price_min" id="price_min" value="{{ filter_form.price.value.min }}">
            <label for="price_max">Max Price:</label>
            <input type="number" name="price_max" id="price_max" value="{{ filter_form.price.value.max }}">
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}" {% endif %}>{{ message }}</li>
                    {% endfor %}
            </ul>
            {% endif %}

            <input type="submit" value="Filter">
            <input type="submit" value="Advanced Filter"
                formaction="{% url 'filtered_properties' property_type_slug='default_property_type' advert_type_slug='default_advert_type' %}">
            <a class="btn ml-auto mr-2" href="{% url 'home' %}"> Clear All Filters</a>
                <div class="row justify-content-start mx-md-n5">
                <div class="property-gallery col justify-content-start px-md-5">
                    <div class="d-flex border bg-light">
                        {% for property in properties %}
                        <div class="p-4">
                            <h2>{{ property.advert_type }}</h2>
                            <p>{{ property.property_type }}</p>
                            <p>{{ property.price }}</p>
                            <p>{{ property.total_floors }}</p>
                            <p>{{ property.bedrooms }}</p>
                            <p>{{ property.bathrooms }}</p>
                        </div>
                        {% empty %}
                        <p>No properties found.</p>

                        {% endfor %}
                    </div>

                </div>
            </div>









    </div>

    {% endblock %}